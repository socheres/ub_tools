#!/bin/bash
set -o errexit

<<<<<<< HEAD

if [[ $TUEFIND_FLAVOUR != "krimdok" ]]; then
    exit 0
fi

if [ -e /var/spool/cron/root ]; then # CentOS
    root_crontab=/var/spool/cron/root
else # Ubuntu
    root_crontab=/var/spool/cron/crontabs/root
fi

sed --in-place '/^# END VUFIND AUTOGENERATED/i 0 1 1 * * "$BIN/update_print_issns_titles_online_ppns_and_online_issns_list.sh"' \
    $root_crontab
=======
if [[ $TUEFIND_FLAVOUR == "krimdok" ]]; then
    if [ -e /var/spool/cron/root ]; then # CentOS
        root_crontab=/var/spool/cron/root
    elif [ -e /var/spool/cron/crontabs/root ]; then # Ubuntu
        root_crontab=/var/spool/cron/crontabs/root
    else
        exit 0 # There is no crontab for root.
    fi
    sed --in-place --regexp-extended '/^# END VUFIND AUTOGENERATED/i 45 22 * * 4 "$BIN/generate_kalliope_originators.py" > "${LOG_DIR}/generate_kalliope_originators.py" 2>&1' ${root_crontab}
    cp /usr/local/ub_tools/cronjobs/*_kalliope_* /usr/local/bin
    generate_kalliope_originators.py > /usr/local/var/log/tuefind/generate_kalliope_originators.log 2>&1
    sed --in-place --regexp-extended '/^# END VUFIND AUTOGENERATED/i 0 22 * * 4 "$BIN/update_beacon_files.sh" > "$LOG_DIR/update_beacon_files.log" 2>&1' ${root_crontab}
fi
>>>>>>> f72b01ca91a63426f69bcb71a9f795d9b2c4fb4f
